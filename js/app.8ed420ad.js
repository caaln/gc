(function(e){function t(t){for(var a,i,o=t[0],u=t[1],l=t[2],d=0,m=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);c&&c(t);while(m.length)m.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,o=1;o<n.length;o++){var u=n[o];0!==r[u]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},s=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var c=u;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1136:function(e,t,n){},"2b21":function(e,t,n){"use strict";var a=n("1136"),r=n.n(a);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=(n("4989"),n("ab8b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Home")],1)}),s=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[e.loaded?null==e.name?n("Name",{on:{"set-name":e.setName}}):"kirstyisadumdum"==e.name?n("Admin",{on:{"set-name":e.setName}}):"kirstyisadumset"==e.name?n("Quiz",{attrs:{uid:e.uid,"set-mode":!0},on:{"set-name":e.setName}}):n("Quiz",{attrs:{uid:e.uid},on:{"set-name":e.setName}}):n("div",[e._v("Authenticating...")])],1)},o=[],u=(n("b0c0"),n("59ca")),l=n.n(u),c=(n("ea7b"),n("66ce"),null);function d(){if(null===c){var e={apiKey:"AIzaSyA4JRB2Bn_kJOcIdbLUQcVBkZZjVC4pMlo",authDomain:"christmas-geography.firebaseapp.com",databaseURL:"https://christmas-geography.firebaseio.com",projectId:"christmas-geography",storageBucket:"christmas-geography.appspot.com",messagingSenderId:"1093394628526",appId:"1:1093394628526:web:a5f31556022febacb7d23f"};c=l.a.initializeApp(e),window.firebaseApp=c}return c}var m,p,f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("label",[e._v("Please enter a name:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",value:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),n("button",{on:{click:function(t){return e.$emit("set-name",e.name)}}},[e._v("Submit")])])},b=[],h={name:"name",data:function(){return{name:null}}},v=h,g=n("2877"),w=Object(g["a"])(v,f,b,!1,null,null,null),y=w.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex flex-column min-vh-100"},[n("div",{staticClass:"p-1 flex-grow-0",attrs:{id:"head"}},[n("div",{staticClass:"dropdown"},[n("button",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}}),n("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[n("a",{staticClass:"dropdown-item",on:{click:function(t){return e.$emit("set-name",null)}}},[e._v("Set Name")]),e._l(e.questions,(function(t,a){return[n("a",{key:a,staticClass:"dropdown-item",on:{click:function(t){e.number=a}}},[e._v(" Question "+e._s(a)+" ")])]}))],2)]),void 0!==e.ansLat&&void 0!==e.ansLng?n("button",{staticClass:"btn btn-primary float-right",attrs:{id:"submit",disabled:e.submitting},on:{click:e.submitAnswer}},[e._v("Submit")]):e._e(),n("h2",{staticClass:"m-0",attrs:{id:"number"}},[e._v("Question "+e._s(e.number))])]),n("div",{ref:"map",staticClass:"flex-grow-1 w-100 h-100",attrs:{id:"map"}})])},C=[],x=(n("99af"),n("4de4"),n("d81d"),n("d3b7"),n("ddb0"),n("3835")),_=n("2909"),j=(n("96cf"),n("1da1")),O="AIzaSyA4JRB2Bn_kJOcIdbLUQcVBkZZjVC4pMlo",M="gmapsCallback",A=!!window.google,L=new Promise((function(e,t){m=e,p=t}));function B(){if(A)return L;A=!0,window[M]=function(){return m(window.google)};var e=document.createElement("script");return e.async=!0,e.defer=!0,e.src="https://maps.googleapis.com/maps/api/js?key=".concat(O,"&callback=").concat(M,"&libraries=geometry"),e.onerror=p,document.querySelector("head").appendChild(e),L}var S={name:"quiz",props:{uid:{type:String,required:!0},setMode:{type:Boolean,default:!1}},data:function(){return{submitting:!1,questions:[],answers:[],number:0,ansLat:void 0,ansLng:void 0,marker:void 0}},mounted:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,n,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d().database().ref("question").on("value",(function(e){a.questions=e.val()||[]})),d().database().ref("answer/".concat(this.uid)).on("value",(function(e){a.answers=e.val(),a.answers&&(a.number=Math.max.apply(Math,Object(_["a"])(Object(_["a"])(a.answers.entries()).filter((function(e){var t=Object(x["a"])(e,2),n=t[1];return n})).map((function(e){var t=Object(x["a"])(e,1),n=t[0];return n}))))+1)})),e.next=4,B();case 4:t=e.sent,n=new t.maps.Map(this.$refs.map,{center:{lat:53.3502709,lng:-.6932712},zoom:2,disableDefaultUI:!0,zoomControl:!0,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,styles:this.setMode?[]:[{featureType:"administrative",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"road",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"}]}]}),n.addListener("click",(function(e){a.ansLat=e.latLng.lat(),a.ansLng=e.latLng.lng(),a.marker&&a.marker.setMap(null),a.marker=new t.maps.Marker({position:e.latLng,map:n})}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{submitAnswer:function(){var e=this;if(!this.submitting){this.submitting=!0;var t={lat:this.ansLat,lng:this.ansLng,time:l.a.database.ServerValue.TIMESTAMP};this.ansLat=null,this.ansLng=null,this.marker&&this.marker.setMap(null),this.setMode?d().database().ref("question/".concat(this.number)).set(t,(function(){e.submitting=!1,e.number+=1})):d().database().ref("answer/".concat(this.uid,"/").concat(this.number)).push(t,(function(){e.submitting=!1}))}}}},R=S,q=(n("a184"),Object(g["a"])(R,k,C,!1,null,null,null)),T=q.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex flex-column min-vh-100"},[n("div",{staticClass:"p-1 flex-grow-0",attrs:{id:"head"}},[n("div",{staticClass:"dropdown"},[n("button",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}}),n("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[n("a",{staticClass:"dropdown-item",on:{click:function(t){return e.$emit("set-name",null)}}},[e._v("Set Name")]),e._l(e.questions,(function(t,a){return[n("a",{key:a,staticClass:"dropdown-item",on:{click:function(t){e.number=a}}},[e._v(" Question "+e._s(a)+" ")])]}))],2)]),n("button",{staticClass:"btn btn-primary float-right ml-1",attrs:{disabled:!e.revealed},on:{click:function(t){e.number+=1}}},[e._v("Next")]),n("button",{staticClass:"btn btn-primary float-right",attrs:{id:"submit",disabled:e.revealed},on:{click:e.revealAnswer}},[e._v("Reveal")]),n("h2",{staticClass:"m-0",attrs:{id:"number"}},[e._v("Question "+e._s(e.number))])]),n("div",{ref:"map",staticClass:"flex-grow-1 w-100 h-100",attrs:{id:"map"}})])},z=[],E=(n("4fad"),n("07ac"),n("159b"),{name:"admin",data:function(){return{map:null,users:[],questions:[],answers:[],number:0,revealed:!1,markers:[]}},watch:{number:function(){this.markers.forEach((function(e){e.setMap(null)})),this.markers=[],this.revealed=!1,this.addAnswers()}},mounted:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:t=e.sent,this.map=new t.maps.Map(this.$refs.map,{center:{lat:53.3502709,lng:-.6932712},zoom:2,disableDefaultUI:!0,zoomControl:!0,mapTypeControl:!0,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1}),d().database().ref("question").on("value",(function(e){n.questions=e.val()||[]})),d().database().ref("user").on("value",(function(e){n.users=e.val()})),d().database().ref("answer").on("value",(function(e){n.answers=e.val(),n.addAnswers()}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{addAnswers:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:t=e.sent,Object.entries(this.answers).forEach((function(e){var a=Object(x["a"])(e,2),r=a[0],s=a[1],i=null,o=null;if(Object.values(s[n.number]||[]).forEach((function(e){(null===i||i<e.time)&&(i=e.time,o=e)})),o){var u=new t.maps.Marker({position:{lat:o.lat,lng:o.lng},map:n.map,label:n.users[r].name.substring(0,2)||"?"});n.markers.push(u)}})),this.fitBounds();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),revealAnswer:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.questions[this.number],e.next=3,B();case 3:n=e.sent,this.markers.push(new n.maps.Marker({position:{lat:t.lat,lng:t.lng},map:this.map,icon:"https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png"})),this.revealed=!0,this.fitBounds();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fitBounds:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.markers.length>1)){e.next=9;break}return e.next=3,B();case 3:t=e.sent,n=new t.maps.LatLngBounds,this.markers.forEach((function(e){n.extend(e.getPosition())})),this.map.fitBounds(n),e.next=11;break;case 9:this.map.setCenter({lat:53.3502709,lng:-.6932712}),this.map.setZoom(2);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}}),I=E,N=(n("2b21"),Object(g["a"])(I,P,z,!1,null,null,null)),$=N.exports,Q={name:"home",components:{Admin:$,Name:y,Quiz:T},data:function(){return{loaded:!1,name:null,uid:null}},mounted:function(){var e=this;d().auth().signInAnonymously(),d().auth().onAuthStateChanged((function(t){t.uid&&(e.uid=t.uid,d().database().ref("user/".concat(e.uid)).on("value",(function(t){e.name=t.val().name||null,e.loaded=!0})))}))},methods:{setName:function(e){d().database().ref("user/".concat(this.uid)).set({name:e}),this.name=e}}},V=Q,J=Object(g["a"])(V,i,o,!1,null,null,null),U=J.exports,Z={components:{Home:U}},D=Z,H=Object(g["a"])(D,r,s,!1,null,null,null),K=H.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(K)}}).$mount("#app")},"5e7c":function(e,t,n){},a184:function(e,t,n){"use strict";var a=n("5e7c"),r=n.n(a);r.a}});
//# sourceMappingURL=app.8ed420ad.js.map